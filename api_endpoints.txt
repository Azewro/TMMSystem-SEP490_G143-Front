
# API Endpoints

## Category: /v1/admin/users

- `GET /v1/admin/users` - all
- `PATCH /v1/admin/users/{id}/active` - setActive

## Category: /v1/auth

- `POST /v1/auth/login` - login
- `POST /v1/auth/change-password` - changePassword
- `POST /v1/auth/forgot-password` - forgotPassword
- `POST /v1/auth/verify-reset-code` - verifyResetCode
- `POST /v1/auth/customer/register` - registerCustomerUser
- `POST /v1/auth/customer/create-company` - createCompany
- `GET /v1/auth/customer/verify` - verifyCustomerEmail
- `GET /v1/auth/customer/profile` - getCustomerProfile

## Category: /v1/contracts

- `GET /v1/contracts` - list
- `GET /v1/contracts/{id}` - get
- `GET /v1/contracts/{id}/order-details` - Lấy chi tiết đơn hàng
- `POST /v1/contracts` - Tạo hợp đồng
- `PUT /v1/contracts/{id}` - Cập nhật hợp đồng
- `DELETE /v1/contracts/{id}` - delete
- `POST /v1/contracts/{id}/upload-signed` - Upload hợp đồng đã ký
- `GET /v1/contracts/pending-approval` - Lấy hợp đồng chờ duyệt
- `POST /v1/contracts/{id}/re-upload` - Re-upload hợp đồng
- `GET /v1/contracts/director/pending` - Lấy hợp đồng chờ duyệt (Director)
- `POST /v1/contracts/{id}/approve` - Duyệt hợp đồng
- `GET /v1/contracts/test-minio` - Test MinIO connection
- `POST /v1/contracts/{id}/reject` - Từ chối hợp đồng
- `GET /v1/contracts/{id}/file-url` - Lấy URL file hợp đồng
- `GET /v1/contracts/{id}/download` - Download file hợp đồng

## Category: /v1/customers

- `GET /v1/customers` - list
- `GET /v1/customers/{id}` - get
- `POST /v1/customers` - Tạo khách hàng
- `PUT /v1/customers/{id}` - Cập nhật khách hàng
- `DELETE /v1/customers/{id}` - delete

## Category: /v1/execution

- `GET /v1/execution/stages/{stageId}/trackings` - listTrackings
- `GET /v1/execution/trackings/{id}` - getTracking
- `POST /v1/execution/trackings` - Ghi nhận event Stage
- `DELETE /v1/execution/trackings/{id}` - deleteTracking
- `GET /v1/execution/stages/{stageId}/pauses` - listPauses
- `GET /v1/execution/pauses/{id}` - getPause
- `POST /v1/execution/pauses` - Tạo/cập nhật Pause Log
- `PUT /v1/execution/pauses/{id}` - updatePause
- `DELETE /v1/execution/pauses/{id}` - deletePause
- `GET /v1/execution/stages/{stageId}/outsourcing` - listOutsourcing
- `GET /v1/execution/outsourcing/{id}` - getOutsourcing
- `POST /v1/execution/outsourcing` - Tạo công việc gia công ngoài
- `PUT /v1/execution/outsourcing/{id}` - updateOutsourcing
- `DELETE /v1/execution/outsourcing/{id}` - deleteOutsourcing
- `GET /v1/execution/orders/{poId}/losses` - listLosses
- `GET /v1/execution/losses/{id}` - getLoss
- `POST /v1/execution/losses` - Ghi nhận thất thoát
- `PUT /v1/execution/losses/{id}` - updateLoss
- `DELETE /v1/execution/losses/{id}` - deleteLoss
- `GET /v1/execution/requisitions/{id}` - getReq
- `POST /v1/execution/requisitions` - Tạo phiếu lĩnh vật tư
- `PUT /v1/execution/requisitions/{id}` - updateReq
- `DELETE /v1/execution/requisitions/{id}` - deleteReq
- `GET /v1/execution/requisitions/{reqId}/details` - listReqDetails
- `GET /v1/execution/requisition-details/{id}` - getReqDetail
- `POST /v1/execution/requisition-details` - Thêm dòng vật tư cho phiếu lĩnh
- `PUT /v1/execution/requisition-details/{id}` - updateReqDetail
- `DELETE /v1/execution/requisition-details/{id}` - deleteReqDetail

## Category: /api/files

- `GET /api/files/{filename}` - Get file by filename - Display inline for images, download for others

## Category: /v1/inventory

- `GET /v1/inventory/materials/{materialId}/stock` - listMaterialStock
- `GET /v1/inventory/material-stock/{id}` - getMaterialStock
- `POST /v1/inventory/material-stock` - Upsert material stock
- `DELETE /v1/inventory/material-stock/{id}` - deleteMaterialStock
- `GET /v1/inventory/materials/{materialId}/transactions` - listMaterialTxns
- `GET /v1/inventory/material-transactions/{id}` - getMaterialTxn
- `POST /v1/inventory/material-transactions` - Create material transaction
- `GET /v1/inventory/products/{productId}/stock` - listFgStock
- `GET /v1/inventory/fg-stock/{id}` - getFgStock
- `POST /v1/inventory/fg-stock` - Upsert FG stock
- `DELETE /v1/inventory/fg-stock/{id}` - deleteFgStock
- `GET /v1/inventory/products/{productId}/transactions` - listFgTxns
- `GET /v1/inventory/fg-transactions/{id}` - getFgTxn
- `POST /v1/inventory/fg-transactions` - Create FG transaction

## Category: /v1/machines

- `GET /v1/machines` - list
- `GET /v1/machines/{id}` - get
- `POST /v1/machines` - Tạo máy
- `PUT /v1/machines/{id}` - Cập nhật máy
- `DELETE /v1/machines/{id}` - delete
- `GET /v1/machines/{machineId}/assignments` - listAssignmentsByMachine
- `GET /v1/machines/stages/{stageId}/assignments` - listAssignmentsByStage
- `GET /v1/machines/assignments/{id}` - getAssignment
- `POST /v1/machines/assignments` - Gán máy cho stage
- `POST /v1/machines/assignments/{id}/release` - Release assignment
- `DELETE /v1/machines/assignments/{id}` - deleteAssignment
- `GET /v1/machines/{machineId}/maintenances` - listMaintenances
- `GET /v1/machines/maintenances/{id}` - getMaintenance
- `POST /v1/machines/maintenances` - Tạo maintenance
- `PUT /v1/machines/maintenances/{id}` - updateMaintenance
- `DELETE /v1/machines/maintenances/{id}` - deleteMaintenance

## Category: /v1/machine-selection

- `GET /v1/machine-selection/suitable-machines` - Lấy danh sách máy móc phù hợp cho công đoạn sản xuất
- `POST /v1/machine-selection/suggest-machines` - Get machine suggestions for production plan stage
- `GET /v1/machine-selection/check-availability` - Check machine availability

## Category: /v1/material-consumption

- `GET /v1/material-consumption/production-plan/{planId}` - Tính toán tiêu hao nguyên vật liệu cho kế hoạch sản xuất
- `GET /v1/material-consumption/production-plan/{planId}/with-waste` - Tính toán tiêu hao nguyên vật liệu với tỷ lệ hao hụt tùy chỉnh
- `GET /v1/material-consumption/production-plan/{planId}/availability` - Check material availability for production plan
- `POST /v1/material-consumption/production-plan/{planId}/create-requisition` - Create material requisition from production plan

## Category: /v1/payments

- `GET /v1/payments/contracts/{contractId}/terms` - listTerms
- `GET /v1/payments/terms/{id}` - getTerm
- `POST /v1/payments/terms` - Tạo điều khoản thanh toán
- `PUT /v1/payments/terms/{id}` - Cập nhật điều khoản thanh toán
- `DELETE /v1/payments/terms/{id}` - deleteTerm
- `GET /v1/payments/contracts/{contractId}` - listPayments
- `GET /v1/payments/{id}` - getPayment
- `POST /v1/payments` - Ghi nhận thanh toán
- `PUT /v1/payments/{id}` - Cập nhật thanh toán
- `DELETE /v1/payments/{id}` - deletePayment

## Category: /v1/product-categories

- `GET /v1/product-categories` - list
- `GET /v1/product-categories/{id}` - get
- `POST /v1/product-categories` - Tạo danh mục sản phẩm
- `PUT /v1/product-categories/{id}` - Cập nhật danh mục sản phẩm
- `DELETE /v1/product-categories/{id}` - delete

## Category: /v1/products

- `GET /v1/products` - listProducts
- `GET /v1/products/{id}` - getProduct
- `POST /v1/products` - Tạo Product
- `PUT /v1/products/{id}` - updateProduct
- `DELETE /v1/products/{id}` - deleteProduct
- `GET /v1/products/materials` - listMaterials
- `GET /v1/products/materials/{id}` - getMaterial
- `POST /v1/products/materials` - Tạo Material
- `PUT /v1/products/materials/{id}` - updateMaterial
- `DELETE /v1/products/materials/{id}` - deleteMaterial
- `GET /v1/products/{productId}/boms` - listBoms
- `GET /v1/products/boms/{id}` - getBom
- `POST /v1/products/boms` - Tạo BOM
- `PUT /v1/products/boms/{id}` - updateBom
- `DELETE /v1/products/boms/{id}` - deleteBom
- `GET /v1/products/boms/{bomId}/details` - listBomDetails
- `GET /v1/products/bom-details/{id}` - getBomDetail
- `POST /v1/products/bom-details` - Thêm BOM Detail
- `PUT /v1/products/bom-details/{id}` - updateBomDetail
- `DELETE /v1/products/bom-details/{id}` - deleteBomDetail

## Category: /v1/production

- `GET /v1/production/orders` - listPO
- `GET /v1/production/orders/{id}` - getPO
- `POST /v1/production/orders` - Tạo Production Order
- `PUT /v1/production/orders/{id}` - Cập nhật Production Order
- `DELETE /v1/production/orders/{id}` - deletePO
- `GET /v1/production/orders/{poId}/details` - listPODetails
- `GET /v1/production/order-details/{id}` - getPODetail
- `POST /v1/production/order-details` - Thêm chi tiết PO
- `PUT /v1/production/order-details/{id}` - Cập nhật chi tiết PO
- `DELETE /v1/production/order-details/{id}` - deletePODetail
- `GET /v1/production/tech-sheets/{id}` - getTechSheet
- `POST /v1/production/tech-sheets` - Tạo Technical Sheet
- `PUT /v1/production/tech-sheets/{id}` - Cập nhật Technical Sheet
- `DELETE /v1/production/tech-sheets/{id}` - deleteTechSheet
- `GET /v1/production/orders/{poId}/work-orders` - listWOs
- `GET /v1/production/work-orders/{id}` - getWO
- `POST /v1/production/work-orders` - Tạo Work Order
- `PUT /v1/production/work-orders/{id}` - Cập nhật Work Order
- `DELETE /v1/production/work-orders/{id}` - deleteWO
- `GET /v1/production/work-orders/{woId}/details` - listWODetails
- `GET /v1/production/work-order-details/{id}` - getWODetail
- `POST /v1/production/work-order-details` - Thêm chi tiết WO
- `PUT /v1/production/work-order-details/{id}` - Cập nhật chi tiết WO
- `DELETE /v1/production/work-order-details/{id}` - deleteWODetail
- `GET /v1/production/work-order-details/{woDetailId}/stages` - listStages
- `GET /v1/production/stages/{id}` - getStage
- `POST /v1/production/stages` - Tạo Production Stage
- `PUT /v1/production/stages/{id}` - Cập nhật Production Stage
- `DELETE /v1/production/stages/{id}` - deleteStage
- `POST /v1/production/orders/create-from-contract` - Tạo lệnh sản xuất từ hợp đồng
- `GET /v1/production/orders/pending-approval` - Lấy lệnh sản xuất chờ duyệt
- `POST /v1/production/orders/{id}/submit-approval` - Gửi lệnh sản xuất để duyệt
- `GET /v1/production/orders/director/pending` - Lấy lệnh sản xuất chờ duyệt (Director)
- `POST /v1/production/orders/{id}/approve` - Duyệt lệnh sản xuất
- `POST /v1/production/orders/{id}/reject` - Từ chối lệnh sản xuất
- `GET /v1/production/contracts/{contractId}/plans` - Get production plans for contract
- `POST /v1/production/plans/{planId}/create-order` - Create production order from approved plan
- `GET /v1/production/plans/pending-approval` - Get production plans pending approval

## Category: /v1/production-plans

- `GET /v1/production-plans` - Lấy danh sách tất cả kế hoạch sản xuất
- `GET /v1/production-plans/{id}` - Lấy chi tiết kế hoạch sản xuất theo ID
- `GET /v1/production-plans/status/{status}` - Lấy kế hoạch sản xuất theo trạng thái
- `GET /v1/production-plans/pending-approval` - Lấy kế hoạch sản xuất chờ duyệt
- `POST /v1/production-plans` - Tạo kế hoạch sản xuất từ hợp đồng
- `PUT /v1/production-plans/{id}/submit` - Gửi kế hoạch để phê duyệt
- `PUT /v1/production-plans/{id}/approve` - Phê duyệt kế hoạch sản xuất
- `PUT /v1/production-plans/{id}/reject` - Từ chối kế hoạch sản xuất
- `GET /v1/production-plans/contract/{contractId}` - Lấy kế hoạch sản xuất theo hợp đồng
- `GET /v1/production-plans/creator/{userId}` - Lấy kế hoạch sản xuất theo người tạo
- `GET /v1/production-plans/approved-not-converted` - Lấy kế hoạch đã duyệt chưa chuyển đổi
- `GET /v1/production-plans/stages/{stageId}/machine-suggestions` - Lấy gợi ý máy móc cho công đoạn sản xuất
- `POST /v1/production-plans/stages/{stageId}/auto-assign-machine` - Tự động gán máy móc cho công đoạn sản xuất
- `GET /v1/production-plans/stages/{stageId}/check-conflicts` - Kiểm tra xung đột lịch trình cho công đoạn sản xuất
- `GET /v1/production-plans/machine-suggestions` - Get machine suggestions for new stage

## Category: /v1/qc

- `GET /v1/qc/checkpoints` - listCheckpoints
- `GET /v1/qc/checkpoints/{id}` - getCheckpoint
- `POST /v1/qc/checkpoints` - Tạo QC Checkpoint
- `PUT /v1/qc/checkpoints/{id}` - updateCheckpoint
- `DELETE /v1/qc/checkpoints/{id}` - deleteCheckpoint
- `GET /v1/qc/stages/{stageId}/inspections` - listInspections
- `GET /v1/qc/inspections/{id}` - getInspection
- `POST /v1/qc/inspections` - Tạo QC Inspection
- `PUT /v1/qc/inspections/{id}` - updateInspection
- `DELETE /v1/qc/inspections/{id}` - deleteInspection
- `GET /v1/qc/inspections/{inspectionId}/defects` - listDefects
- `GET /v1/qc/defects/{id}` - getDefect
- `POST /v1/qc/defects` - Tạo QC Defect
- `PUT /v1/qc/defects/{id}` - updateDefect
- `DELETE /v1/qc/defects/{id}` - deleteDefect
- `GET /v1/qc/inspections/{inspectionId}/photos` - listPhotos
- `GET /v1/qc/photos/{id}` - getPhoto
- `POST /v1/qc/photos` - Tạo QC Photo
- `DELETE /v1/qc/photos/{id}` - deletePhoto
- `GET /v1/qc/standards` - listStandards
- `GET /v1/qc/standards/{id}` - getStandard
- `POST /v1/qc/standards` - Tạo QC Standard
- `PUT /v1/qc/standards/{id}` - updateStandard
- `DELETE /v1/qc/standards/{id}` - deleteStandard

## Category: /v1/quotations

- `GET /v1/quotations` - Danh sách báo giá
- `GET /v1/quotations/{id}` - Lấy chi tiết báo giá
- `POST /v1/quotations` - Tạo báo giá
- `PUT /v1/quotations/{id}` - Cập nhật báo giá
- `DELETE /v1/quotations/{id}` - delete
- `POST /v1/quotations/calculate-price` - Tính giá báo giá từ RFQ
- `POST /v1/quotations/recalculate-price` - Tính lại giá khi thay đổi profit margin
- `POST /v1/quotations/create-from-rfq` - Planning tạo báo giá từ RFQ
- `GET /v1/quotations/pending` - Lấy báo giá chờ gửi
- `POST /v1/quotations/{id}/send-to-customer` - Gửi báo giá cho khách hàng
- `GET /v1/quotations/customer/{customerId}` - Lấy báo giá của khách hàng
- `POST /v1/quotations/{id}/approve` - Duyệt báo giá
- `POST /v1/quotations/{id}/reject` - Từ chối báo giá
- `POST /v1/quotations/{id}/create-order` - Tạo đơn hàng từ báo giá

## Category: /v1/rfqs

- `GET /v1/rfqs` - Danh sách RFQ
- `GET /v1/rfqs/{id}` - Lấy chi tiết RFQ
- `POST /v1/rfqs` - Tạo RFQ
- `PUT /v1/rfqs/{id}` - Cập nhật RFQ
- `DELETE /v1/rfqs/{id}` - Xóa RFQ
- `GET /v1/rfqs/{rfqId}/details` - Danh sách chi tiết sản phẩm của RFQ
- `GET /v1/rfqs/details/{id}` - Lấy 1 dòng chi tiết RFQ
- `POST /v1/rfqs/{rfqId}/details` - Thêm chi tiết sản phẩm vào RFQ
- `PUT /v1/rfqs/details/{id}` - Cập nhật chi tiết sản phẩm trong RFQ
- `DELETE /v1/rfqs/details/{id}` - Xóa 1 dòng chi tiết RFQ
- `PUT /v1/rfqs/{id}/expected-delivery-date` - Cập nhật ngày giao hàng mong muốn
- `POST /v1/rfqs/{id}/send` - Gửi RFQ (chuyển từ DRAFT sang SENT)
- `POST /v1/rfqs/{id}/preliminary-check` - Kiểm tra sơ bộ RFQ
- `POST /v1/rfqs/{id}/forward-to-planning` - Chuyển RFQ sang Planning Department
- `POST /v1/rfqs/{id}/receive-by-planning` - Planning Department nhận RFQ
- `POST /v1/rfqs/{id}/cancel` - Hủy RFQ
- `POST /v1/rfqs/{id}/check-machine-capacity` - Kiểm tra năng lực máy móc
- `POST /v1/rfqs/{id}/check-warehouse-capacity` - Kiểm tra năng lực kho hàng

## Category: /v1/roles

- `GET /v1/roles` - getAllRoles
- `GET /v1/roles/{id}` - getRoleById
- `GET /v1/roles/name/{name}` - getRoleByName
- `POST /v1/roles` - createRole
- `PUT /v1/roles/{id}` - updateRole
- `DELETE /v1/roles/{id}` - deleteRole

## Category: /v1/system

- `GET /v1/system/users/{userId}/notifications` - listNotifications
- `GET /v1/system/notifications/{id}` - getNotification
- `POST /v1/system/notifications` - Tạo notification
- `POST /v1/system/notifications/{id}/read` - markRead
- `DELETE /v1/system/notifications/{id}` - deleteNotification
- `GET /v1/system/report-templates` - listReportTemplates
- `GET /v1/system/report-templates/{id}` - getReportTemplate
- `POST /v1/system/report-templates` - Tạo report template
- `PUT /v1/system/report-templates/{id}` - updateReportTemplate
- `DELETE /v1/system/report-templates/{id}` - deleteReportTemplate
- `GET /v1/system/audit-logs` - listAuditLogs
- `GET /v1/system/audit-logs/{id}` - getAuditLog
- `POST /v1/system/audit-logs` - Tạo audit log

## Category: /api/admin/users

- `GET /api/admin/users` - getAll
- `GET /api/admin/users/{id}` - getOne
- `POST /api/admin/users` - Tạo user mới
- `PUT /api/admin/users/{id}` - Cập nhật user
- `DELETE /api/admin/users/{id}` - delete
